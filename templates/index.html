<!DOCTYPE html>
<html>
<head>
    <title>Trend Analysis Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .page-title {
            text-align: center;
            color: #202124;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .trends-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .trend-widget {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            height: 400px;
        }

        .trend-title {
            color: #1a73e8;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            color: #666;
            padding: 20px;
        }

        .error-message {
            color: #d32f2f;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 900px) {
            .trends-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1 class="page-title">Trend Analysis Dashboard</h1>
    <div class="trends-container">
        <div class="trend-widget">
            <h3 class="trend-title">Gold Investment Trends</h3>
            <div id="gold-chart"></div>
        </div>
        <div class="trend-widget">
            <h3 class="trend-title">Bitcoin Investment Trends</h3>
            <div id="bitcoin-chart"></div>
        </div>
        <div class="trend-widget">
            <h3 class="trend-title">Stock Market Investment Trends</h3>
            <div id="stock-chart"></div>
        </div>
        <div class="trend-widget">
            <h3 class="trend-title">Real Estate Investment Trends</h3>
            <div id="real-estate-chart"></div>
        </div>
    </div>

    <script>
        async function fetchTrendData() {
            try {
                const response = await fetch('/api/trends');
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching trend data:', error);
                return null;
            }
        }

        function createChart(containerId, data, title) {
            if (!data) {
                document.getElementById(containerId).innerHTML = '<div class="error-message">Failed to load data</div>';
                return;
            }

            const trace = {
                x: data.dates,
                y: data.values,
                type: 'scatter',
                mode: 'lines',
                name: title
            };

            const layout = {
                title: title,
                xaxis: {
                    title: 'Date',
                    showgrid: false
                },
                yaxis: {
                    title: 'Interest Over Time',
                    showgrid: true
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: { t: 30, b: 30, l: 40, r: 20 },
                height: 300
            };

            Plotly.newPlot(containerId, [trace], layout);
        }

        async function initializeCharts() {
            const data = await fetchTrendData();
            if (!data) {
                document.querySelectorAll('.trend-widget').forEach(widget => {
                    widget.innerHTML = '<div class="error-message">Failed to load data</div>';
                });
                return;
            }

            createChart('gold-chart', data['buy gold'], 'Gold Investment Trends');
            createChart('bitcoin-chart', data['bitcoin investment'], 'Bitcoin Investment Trends');
            createChart('stock-chart', data['stock market investment'], 'Stock Market Investment Trends');
            createChart('real-estate-chart', data['real estate investment'], 'Real Estate Investment Trends');
        }

        // Initialize charts when the page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeCharts);
        } else {
            initializeCharts();
        }
    </script>
</body>
</html> 